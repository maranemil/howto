
###################################################################
#
#  print file size in MB
#
###################################################################

ls -lh
ls -lah
ls -lash

ls -al --block-size=M
ls --block-size=M
ll --block-size=M

# ls -l | awk 'BEGIN{mega=1048576} $5 >= mega {$5 = $5/mega "MB"} {print}'


###################################################################
#
#	Removing files older than 7 days
#	https://askubuntu.com/questions/589210/removing-files-older-than-7-days/589224
#	https://unix.stackexchange.com/questions/194863/delete-files-older-than-x-days
#	https://www.howtogeek.com/howto/ubuntu/delete-files-older-than-x-days-on-linux/
#	https://linux.die.net/man/1/find
#
###################################################################

find /path/to/ -type f -mtime +7 -name '*.gz' -print0 | xargs -r0 rm --
find /path/to/ -type f -mtime +7 -name '*.gz' -execdir rm -- '{}' \;

find /path/to/ -type f -mtime +7 -exec rm {} \;
find /path/to/ -mindepth 1 -mtime +7 -delete
find /path/to/ -maxdepth 1 -type f -mtime +7 -mtime -31 -name 'wncw*.gz' -ls -exec rm {} \;

###################################################################
#
#	Common truncate options
#	http://man7.org/linux/man-pages/man1/truncate.1.html
#	https://linoxide.com/linux-how-to/use-truncate-command-linux/
#
###################################################################

for i in file_prefix*; do echo $i;done
for i in file_prefix*; do truncate -s0 $i; done

-c, --no-create --> do not create any files
-o, --io-blocks --> treat SIZE as number of IO blocks instead of bytes
-r, --reference=RFILE --> base size on RFILE
-s, --size=SIZE --> set or adjust the file size by SIZE bytes
--help --> display this help and exit
--version --> output version information and exit

truncate -s 0 file.txt		# Clear contents
truncate -s 100K file.txt	# to a specific size
truncate -s +200K file.txt	# Extend file size
truncate -s -250K file.txt 	# Reduce file size

The SIZE argument is an integer and optional unit (example: 10K is
10*1024).  Units are K,M,G,T,P,E,Z,Y (powers of 1024) or KB,MB,...
(powers of 1000).

SIZE may also be prefixed by one of the following modifying
characters: '+' extend by, '-' reduce by, '<' at most, '>' at least,
'/' round down to multiple of, '%' round up to multiple of.
-------------------------------------------------


###################################################################
#
# 	Use vars into loop - shell cmd
#
###################################################################

https://www.linuxtechi.com/compare-numbers-strings-files-in-bash-script/
http://mindspill.net/computing/linux-notes/text-manipulation-cut-awk-and-sed/

# Numeric Comparisons
num1 -eq num2                  check if 1st  number is equal to 2nd number
num1 -ge num2                  checks if 1st  number  is greater than or equal to 2nd number
num1 -gt num2                  checks if 1st  number is greater than 2nd number
num1 -le num2                   checks if 1st number is less than or equal to 2nd number
num1 -lt num2                   checks if 1st  number  is less than 2nd number
num1 -ne num2                  checks if 1st  number  is not equal to 2nd number

# Strings Comparisons
var1 = var2     checks if var1 is the same as string var2
var1 != var2    checks if var1 is not the same as var2
var1 < var2     checks if var1 is less than var2
var1 > var2     checks if var1 is greater than var2
-n var1             checks if var1 has a length greater than zero
-z var1             checks if var1 has a length of zero

# Tokenize strings using cut
cut -d[delimiter] -f[field_number] [filename]

Tokenize strings using awk
awk '{print $[n]}'
df | awk '{print $3}' # print 3th column

# create vatiable using terminal
foo=$(date) echo $foo

# Remove a line from some text using sed
sed '[n]d' will remove the [n]th line.
sed '2d'

# Escape spaces with sed / escape all space characters
sed "s/ /\\\ /g" [file]

for i in {1..30}; do if [ $i != 10 ]; then echo "hello $i"; fi; done
echo "1  2  3" | cut -d' ' -f3

// for each file get zise and compare if bigger than 100
for i in *.txt; do foo=$(ls -s $i | cut -d ' ' -f1); echo "foo="$foo; if [ $foo -gt 100 ]; then echo $foo; fi;  ; done


###################################################################
#
# sed Examples
#
###################################################################

# remove quotes from file
sed 's/"//g' test.csv > new.csv
sed 's/"//gw new2.csv' test.csv

http://www.grymoire.com/Unix/Sed.html#uh-36
https://linux.die.net/man/1/sed
https://alvinalexander.com/linux-unix/sed-edit-files-in-place-make-backup-copy
http://sed.sourceforge.net/sed1line.txt

#----------------

my_commands.sed
sed -i.bak -e's/2011/2012/' $filename

# cmd
for file in `cat html_files.txt`
do
  sed -i.bak -f my_commands.sed $file
done

#----------------
https://www.thegeekstuff.com/2009/10/unix-sed-tutorial-how-to-write-to-a-file-using-sed/comment-page-1/
#----------------

# Write 1st line of the file
sed -n '1w output.txt' thegeekstuff.txt

# Write first & last line of the file
sed -n -e '1w output.txt' -e '$w output.txt' thegeekstuff.txt

# Write the lines matches with the pattern Storage or Sysadmin
sed -n -e '/Storage/w output.txt' -e '/Sysadmin/w output.txt' thegeekstuff.txt

# Write the lines from which the pattern matches to till end of the file
sed -n '/Storage/,$w output.txt' thegeekstuff.txt

Write the lines which matches pattern and next two lines from match
sed -n '/Storage/,+2w output.txt' thegeekstuff.txt

###################################################################
#
#   get size folder by extension file
#
###################################################################

du -sh *.jpg
ls -shR *.jpg
du -ch *.jpg | grep total

###################################################################
#
#  Argument list too long when copying files ( argument list too long: cp/scp/rsync )
#  by copying huge amount of data
#
###################################################################

FIX:
for i in *; do cp "$i" ../prjshp/; done
for i in /path/to/dir/*; do cp "$i" /path/to/other/dir/; done

eventually?
find  /home/user/folder/ -name "*.jpg" -exec cp -uf "{}" /your/destination \;




###################################################################
#
#   Delete cmd history Ubuntu
#   https://www.cyberciti.biz/faq/clear-the-shell-history-in-ubuntu-linux/
#
###################################################################

history -c
history -c && history -w
history -d linenumber
history -c && history -w && logout

# or delete echo "$HISTFILE" with
unset HISTFILE

# set max history file
export HISTSIZE=50000
export HISTFILESIZE=50000
export HISTTIMEFORMAT="%d/%m/%y %T "




###############################################
#
#	rm -rf "device or resource busyâ€
#	rm: cannot remove `html': Device or resource busy
#	https://unix.stackexchange.com/questions/11238/how-to-get-over-device-or-resource-busy
#	https://www.linuxquestions.org/questions/linux-general-1/how-to-remove-a-busy-file-519420/
#	https://github.com/mpartel/bindfs/issues/64
#
###############################################

lsof +D /path
kill(1)

lsof +D /var/www/html
/sbin/fuser -m /var/www/html

lsof +D ./ | awk '{print $2}' | tail -n +2 | xargs kill -9

ps -ef | grep name-of-busy-dir
sudo kill -15 pid-here

umount -l
fuser -vm /home/test13/files


###############################################
#  CentOS 7 Exif ImageMagick
https://www.unixwitch.de/de/sysadmin/tools/exif_tag_script
###############################################

yum install ffmpeg perl-Image-ExifTool

ffmpeg	/usr/bin/ffmpeg
ffprobe	/usr/bin/ffprobe
exiftool	/usr/bin/exiftool

# Synology NAS & Exif Tool CMD
/usr/bin/exiftool /volume1/Fotografie/1_Pictures/ -q -r -t -f -S -n -fileName -Model -FocalLength -ExposureTime -FNumber -ISO -BrightnessValue -LensID -createdate -FileSize -ext ".CR2" -ext ".NEF" > /volume1/Fotografie/1_Pictures/Exif3.txt

###############################################
Selecting Frames in ImageMagick
https://imagemagick.org/script/command-line-processing.php
###############################################

magick 'images.gif[0]' image.png
magick 'images.gif[0-3]' images.mng


##############################################################
#
#   Generate SSH KEY
#   https://git-scm.com/book/be/v2/Git-on-the-Server-Generating-Your-SSH-Public-Key
#   https://git-scm.com/book/de/v1/Git-auf-dem-Server-Einrichten-des-Servers
#
##############################################################


sudo adduser git
#sudo adduser user group
#sudo deluser user group
#sudo usermod -a -G groupName userName
su git
cd
mkdir .ssh

ssh-keygen -t rsa -b 4096 -C "test@some.com" 	# add ssh key
eval "$(ssh-agent -s)"  						# Start the ssh-agent in the background
ssh-add ~/.ssh/id_rsa  							# Add your SSH key to the ssh-agent
cat /home/xyz/.ssh/id_rsa.pub  				    # print ssh key in terminal
#sudo tail -1 /home/xyz/.ssh/id_rsa.pub         # print ssh key in terminal
#xclip -sel clip < ~/.ssh/id_rsa.pub 			# copy ssh key to clipboard
ssh -T git@github.com 							# test ssh connection
ssh-keygen -p									# Start the SSH key creation process - Regenerate string in key


https://help.github.com/articles/connecting-to-github-with-ssh/
https://help.github.com/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent/
https://help.github.com/articles/testing-your-ssh-connection/



##############################################################
#
#   copy ssh key into slave machine
#
##############################################################

hostname
ssh-keygen -t rsa

cat ~/.ssh/id_rsa.pub | ssh user@123.45.56.78 "mkdir -p ~/.ssh && cat >>  ~/.ssh/authorized_keys"
cat ~/.ssh/id_rsa.pub | ssh user@hostname 'cat >> ~/.ssh/authorized_keys'
cat ~/.ssh/id_rsa.pub | ssh user@hostname 'cat >> .ssh/authorized_keys'

sudo service ssh restart

## https://www.digitalocean.com/community/tutorials/how-to-set-up-ssh-keys--2
https://www.digitalocean.com/community/tutorials/how-to-configure-ssh-key-based-authentication-on-a-linux-server
https://www.howtogeek.com/168147/add-public-ssh-key-to-remote-server-in-a-single-command/
https://www.cyberciti.biz/faq/how-to-set-up-ssh-keys-on-linux-unix/
http://www.commandlinefu.com/commands/view/610/add-your-public-ssh-key-to-a-server-in-one-command
http://www.computerhope.com/unix/uhostnam.htm
https://www.cyberciti.biz/faq/find-my-linux-machine-name/
https://www.cyberciti.biz/faq/howto-restart-ssh/



#######################################################################
#
# Firewall Settings
#
#######################################################################

sudo apt-get install ufw gufw
sudo apt-get install ufw

sudo ufw status
sudo ufw status verbose
sudo ufw enable
sudo ufw disable
sudo ufw reset


sudo ufw allow|deny|reject SERVICE
sudo ufw allow ssh
sudo ufw allow https
sudo ufw allow proto tcp from any to 123.456.78.90 port 22

sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
sudo ufw allow  22/udp

sudo ufw allow 443
sudo ufw allow ftp
sudo ufw allow 21/tcp

sudo ufw allow 6000:6007/tcp
sudo ufw allow 6000:6007/udp

sudo ufw allow from 15.15.15.51

sudo ufw default allow      # alles erlauben
sudo ufw default deny       # alles verbieten

ufw app list
ufw app info 'Apache Full'

# https://wiki.ubuntuusers.de/ufw/

sudo ufw allow 1000:2000/tcp
sudo ufw allow 1000:2000/udp

sudo ufw delete allow ssh
sudo ufw delete allow 80/tcp
sudo ufw delete allow 1000:2000/tcp

sudo ufw allow 80/tcp
sudo ufw deny 80/tcp

# https://www.digitalocean.com/community/tutorials/how-to-setup-a-firewall-with-ufw-on-an-ubuntu-and-debian-cloud-server
# https://www.digitalocean.com/community/tutorials/how-to-set-up-a-firewall-with-ufw-on-ubuntu-14-04

# https://help.ubuntu.com/lts/serverguide/firewall.html
# https://help.ubuntu.com/community/UFW

# ----------------------------

sudo apt-get install ufw
sudo ufw enable
sudo ufw default deny
sudo ufw allow|deny [service]
sudo ufw allow smtp #25/tcp (smtp)
sudo ufw allow 22/tcp # 22/tcp (ssh)
sudo ufw allow 53 # (tcp/udp)
sudo ufw allow from 192.168.1.100
sudo ufw allow proto udp 192.168.0.1 port 53 to 192.168.0.2 port 53
sudo ufw deny smtp
sudo ufw delete allow smtp
sudo ufw status

sudo apt-get install ufw
sudo ufw enable
sudo ufw default deny
sudo ufw enable|disable
sudo ufw logging on|off
sudo ufw default allow|deny
sudo ufw allow|deny [service]

sudo ufw status
sudo ufw allow 53
sudo ufw delete allow 53
sudo ufw allow 80/tcp
sudo ufw delete allow 80/tcp
sudo ufw allow smtp
sudo ufw delete allow smtp
sudo ufw allow from 192.168.254.254
sudo ufw delete allow from 192.168.254.254



#########################################
#
#	Find all files modified
#
#########################################

Show recent modified/created files using Terminal
https://askubuntu.com/questions/411462/show-recent-modified-created-files-using-terminal

find ${1} -type f | xargs stat --format '%Y :%y %n' 2>/dev/null | sort -nr | cut -d: -f2-
find /to/target/directory* -mtime -1
find /to/target/directory* -mmin 30
ls -t


Find all files modified by a specific user (minutes)
https://askubuntu.com/questions/265338/find-all-files-modified-by-a-specific-user?rq=1

find /home -user $USER -mtime -90

How do I find a recent file by date created?
https://askubuntu.com/questions/532329/how-do-i-find-a-recent-file-by-date-created?rq=1

find / -name app -type d -mtime 0
find / -name app -type d -ctime 0
find . -type f -newermt 2018-02-28 -not -newermt 2018-03-28

How to show all files created on a specific date?
https://askubuntu.com/questions/625584/how-to-show-all-files-created-on-a-specific-date?rq=1
sudo find / -type f -newermt 2015-05-16
sudo find / -type f -newermt 2015-05-16 | xargs ls -l
sudo find / -type f -newermt 2015-05-16 -ls
sudo find / -type f -newermt 2015-05-16 | xargs ls -lt
sudo find / -type f -newermt 2015-05-16 | xargs ls -ltr

How to list the last modified files in a specific directory recursively
https://askubuntu.com/questions/684220/how-to-list-the-last-modified-files-in-a-specific-directory-recursively?rq=1

find . -type f -printf '%T@ %p\n' | sort -k1,1nr | head -5
stat -c '%Y %n' * | sort -k1,1nr | head -5
find . -maxdepth 1 -type f -printf '%T@ %p\n' | sort -k1,1nr | head -5
ls -Art | tail -n 2
ls /opt/spark/ -Art | tail -n 1

How to view recent files from the command-line? (amin - minutes)
https://askubuntu.com/questions/700885/how-to-view-recent-files-from-the-command-line?rq=1

find . -type f -amin 5
find . -type f -amin -10
find . -type f -amin -30


########################################################
#
#	5 Simple Ways To Free Up Space on Ubuntu
#	https://www.omgubuntu.co.uk/2016/08/5-ways-free-up-space-on-ubuntu
#	https://itsfoss.com/free-up-space-ubuntu-linux/
#
########################################################

sudo du -sh /var/cache/apt/archives
#sudo du -sh /var/cache/apt
sudo du -sh ~/.cache/thumbnails
rm -rf ~/.cache/thumbnails/*

sudo apt-get clean
sudo apt-get autoremove
sudo apt-get autoclean

#sudo apt-get remove package-name1 package-name2
#sudo apt-get autoremove --purge

sudo dpkg --list 'linux-image*'
sudo apt-get remove linux-image-VERSION
sudo apt-get install gtkorphan

du -h /var/lib/snapd/snaps

BleachBit > bleachbit_2.2_all_ubuntu1810.deb
Stacer > https://github.com/oguzhaninan/Stacer > sudo apt-get install stacer -y

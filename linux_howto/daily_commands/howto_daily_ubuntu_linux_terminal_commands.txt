
###############################
## Daily Commands Ubuntu
###############################

cd  /somefolder						# go to folder
mkdir /somefolder                   # create folder
touch /somefile

cp -r /somefolder/* /newfolder				# copy to folder
mv /home/user/my_static /home/user/static		# rename or move files

sudo ln -s /home/user/realpath/  /opt/some/htdocs/  	# make symlinks

chown name:name -R /somefolder
chmod +xrw -R /somefolder

sudo truncate -s 0 filename     # clean content from big files

######################################
#	Completely overwrite directory
######################################

cp --version
cp -i oder --interactive
cp -v oder --verbose
cp -r oder -R oder --recursive
# cp -r * .. followed by rm -rf *.

https://wiki.ubuntuusers.de/cp/
https://wiki.ubuntuusers.de/mv/
http://www.rapidtables.com/code/linux/cp/cp-r.htm

......

mv datei_a.txt datei_b.txt
mv datei_a.txt datei_b.txt data/
mv datei_a.txt ~/Dokumente/test/
mv ordner1 ordner2
mv *.JPG *.jpg

.....

############################################################
#
#   rsync
#
############################################################

--update or --existing or --ignore-existing
-av --stats
-raz
--progress
-avh --dry-run
--update -raz --progress #
--dry-run --update -raz --progress # show a simulation
-I, --ignore-times   don't skip files that match size and time

https://www.electrictoolbox.com/rsync-ignore-existing-update-newer/


###########################################################################
#
# 	Copy files exclude existing files
#
###########################################################################

https://unix.stackexchange.com/questions/14191/scp-without-replacing-existing-files-in-the-destination

Use rsync, and pass -u if you want to only update files that are newer in the original directory,
or --ignore-existing to skip all files that already exist in the destination.

rsync -au /local/directory/ host:/remote/directory/
rsync -a --ignore-existing /local/directory/ host:/remote/directory/

scp  `find /data/*.gz -type f -mtime +7` USER@SERVER:/backup/

###########################################################################
#
#   Split Programs in columns
#
###########################################################################

Ctrl + Alt +Numpad left / Ctrl + Alt +Numpad right. must be here somewhere.
Ctrl + Alt +Numpad up / Ctrl + Alt +Numpad down for upper/lower half.

To set a window occupying the left half of the screen use this shortcut:
Ctrl + Super + ←

For the right half:
Ctrl + Super + →

http://askubuntu.com/questions/586424/how-do-i-display-two-windows-as-split-screen

###########################################################################
#
#	Split Ubuntu Programs windows equaly
#
###########################################################################

To set a window occupying the left half of the screen use this shortcut:
Ctrl + Super + ←

For the right half:
Ctrl + Super + →

Ctrl + Alt +Numpad left / Ctrl + Alt +Numpad right.
Ctrl + Alt +Numpad up / Ctrl + Alt +Numpad down for upper/lower half.


###########################################################################
#
#   Disk Status and clean:
#
###########################################################################

ls -lta				            # print list view folder
ls -lrt                         # sort by time, revers
ll -t | head -30                # print last 30 files ordered by date
ll -t | less                    # show few
ls -lrth | tail -n 10           # show 10
ls -lrth | grep *.zip | tail    # show zip files


df -h				# print hdd space
du -s -h *
du -h --max-depth=1 # print hdd space 1 level deep

du /home/user/ --max-depth=1 -BM | sort -n
du /home/user/ --max-depth=1 -BK | sort -h
du -hx --max-depth=1 | sort -n
du -h | sort -h



du -h --max-depth=1 .                   # get current size dir
du -h --max-depth=1 . | sort -h         # human readable
du -hs # get total size




# find file older thn 90 days - print file date
find /home/user/ -maxdepth 1   -mtime +90 -type d -exec stat  -c "%n %y" {} \;
find /home/user/ -maxdepth 1   -mtime +90 -type d -print | xargs ls -dltr

# print size
find -type f -print0 | xargs -0 stat --print='%s\n' | awk '{total+=$1} END {print total}'
find -type f -print0 | xargs -0 stat --print='%s\n' | awk '{total+=$1/(1024*1024)} END {print total}'
find -type f -print0 | xargs -0 stat --print='%s\n' | awk '{total+=$1/1024/1024} END {print total}'
find -type f -print0 | xargs -0 stat --print='%s\n' | awk '{ byte =$1 /1024/1024/1024; print byte " GB" }'
find -type f -print0 | xargs -0 stat --print='%s\n' | awk '{ byte =int($1 /1024/1024/1024); print byte " GB" }'


df -h .
du -h --max-depth 1 .



sudo find / -name "somefile"	# search file
sudo find /opt -type f -size +300000k -exec ls -lh {} \; | awk '{ print $9 ": " $5 }'	# get big files
sudo find /opt -type f -size +500M -exec ls -lh {} \; | awk '{ print $9 ": " $5 }'
sudo find / -name '*' -size +1G

sudo find /home/user/Downloads/ -type f -iname "*.txt" -exec grep -H 'String' {} +	# search test in files
sudo find /home/user -type f -iname "*.txt" -exec grep -i "String" {} +
sudo find . -name "*.php" -exec grep -Hni "String" --color {} \;

grep -nr 'String' .
grep -inr "String" .
grep -inR "String" .
grep -r 'String' *

find . -type f -print0 | xargs -0 grep -li 'String'
find . -type f -exec grep 'String'  {} \;



####################################################
#
#	GREP
#	https://www.linode.com/docs/tools-reference/tools/how-to-grep-for-text-in-files/
#	https://linux.die.net/man/1/grep
#
####################################################

grep -Ril 'pattern' .
grep -HinvR 'pattern' .
grep -rainH -m  'pattern' 1 .
grep --color -raivnH -m 1 'pattern' .
grep -qlF 'pattern' file
grep -rIl "pattern" .


-e PATTERN
-f FILE
-i, --ignore-case
-v, --invert-match
-w, --word-regexp
-x, --line-regexp
-c, --count
-l, --files-with-matches
-m NUM, --max-count=NUM
-o, --only-matching
-H, --with-filename
-h, --no-filename
-n, --line-number
-u, --unix-byte-offsets
-R, -r, --recursive
-U, --binary

#########################################################################
#
#   Grep only the first match and stop
#   https://stackoverflow.com/questions/14093452/grep-only-the-first-match-and-stop
#
#########################################################################

grep -o -a -m 1 -h -r "Pulsanti Operietur" /path/to/dir | head -1

-o, --only-matching, print only the matched part of the line (instead of the entire line)
-a, --text, process a binary file as if it were text
-m 1, --max-count, stop reading a file after 1 matching line
-h, --no-filename, suppress the prefixing of file names on output
-r, --recursive, read all files under a directory recursively

grep -m1 -i "Pulsanti Operietur" /path/to/dir
find -type f -exec grep -lm1 "PATTERN" {} \; -a -quit


-----------

find . -name "*.php" | xargs grep -i "STRING" >> output.txt
find . -name "*.php" -exec grep -i -n "STRING" {} \;  >output.txt
find . -name "*.php" -exec grep -i -Hn "STRING" {} \;  >output.txt
find . -name "*.php" -print0 | xargs -0 grep -i -n "STRING" > output.txt

grep -r "STRING" * > output-file
grep -n "STRING" * > output-file
grep -r "STRING" . 2>&1 | tee /your/path/to/file/filename.txt

hexdump /dev/urandom | grep --line-buffered -i "ffff f" > random
hexdump /dev/urandom | grep --line-buffered -i "ffff f" | tee random

tailf log | grep --line-buffered "STRING" >> file

cat file.txt | grep -v STRING > file.txt

cat /dev/urandom | hexdump |
  while IFS= read -r line; do
    printf '%s\n' "$line" >> random;
  done

https://www.cyberciti.biz/faq/howto-save-ouput-of-linux-unix-command-to-file/

----------------------------------------------------------------------------------------

grep -r "http" > ../results.txt
cat results.txt | grep "http" > filename1.txt

# show only first 12 results
grep -m 12  -o 'http://[a-zA-Z.-]*/[a-zA-Z0-9+-]*/[a-zA-Z0-9.,-+]*' filename1.txt

# regex
grep -o 'http://[a-zA-Z.-]*/[a-zA-Z0-9+-]*/[a-zA-Z0-9.,-+]*' filename1.txt > filename2.txt
grep -o 'https://[a-zA-Z.-]*/[a-zA-Z0-9+-]*/[a-zA-Z0-9.,-+]*' filename1.txt > filename2.txt

#one line match regex
grep -C 1 -m 12  -o 'https://www.youtube.*[a-zA-Z0-9]\s' filename1.txt > filename2.txt
grep -C 1 -m 2 -n "string" filename1.txt > filename2.txt


http://stackoverflow.com/questions/13611973/how-to-grep-for-a-url-in-a-file
http://www.robelle.com/smugbook/regexpr.html
https://askubuntu.com/questions/640587/grep-limit-output-number-with-context
http://stackoverflow.com/questions/5013151/how-do-i-limit-the-number-of-results-returned-from-grep

----------------------------------------------------------------------------------------
cd /usr/ && egrep -ir "wtf" | grep -Hni -m 1 "wtf" # print results from each file with the line where found
http://manpages.ubuntu.com/manpages/precise/de/man1/grep.1.html

cd /usr/src/linux && egrep -ir "fuck" # search in files
cd /usr/ && egrep -ir "fuck"
cd /usr && egrep -ir -w "fuck" # print first line

sudo sh someinstalelr.sh	# start some app
sudo ./someinstalelr.run	# start some app

sudo apt-get install someapp	# install app
sudo apt-get remove someapp	# remove app
sudo apt-get purge someapp	# purge app

sudo service someapp start	# start service
sudo service someapp stop	# stop service
sudo service someapp restart	# restart service

sudo /opt/lampp/xampp restart	# restart xampp


###########################################################################
#
#   search text in ubuntu
#
###########################################################################

sudo apt-get install gnome-search-tool

###########################################################################
#
#   search text in zip files
#
###########################################################################

for file in *.zip; do unzip -c "$file" | grep "ORA-1680"; done

for file in *.zip; do
    if ( unzip -c "$file" | grep -q "ORA-1680"); then
        echo "$file"
    fi
done

for i in *.zip
do
   zipgrep ORA-1680 "$i"
done

###########################################################################
#
#   search for all .zip files
#   in current directory and all sub-directories
#
###########################################################################

find . -iname \*.zip
find . |grep -e "\.zip$"

###########################################################################
#
#   find filename in zip files
#
###########################################################################

for f in `ls *.zip`; do echo "$f: "; unzip -l $f | grep <file_name>; done


###########################################################################
#
#   add bash aliases
#
###########################################################################

# Add Bash Aliases and Time

nano  /home/userx/.bashrc

# add alias
alias somename='ssh -Ax ....'

# show time
export PROMPT_COMMAND="echo -n \[\$(date +%H:%M:%S)\]\ "

# export PS1="\t [\u@\h \W]\\$ \[$(tput sgr0)\]"
# echo "export PROMPT_COMMAND="echo -n \[\$(date +%H:%M:%S)\]\\"" >> .bashrc
# export PROMPT_COMMAND="echo -n \[\$(date +%H:%M:%S)\]\\"
# PS1="[\A \u@\h \W\a]$"

# http://askubuntu.com/questions/193416/adding-timestamps-to-terminal-prompts


###########################################################################
#
#   remove cache
#
###########################################################################

sudo apt-get clean
sudo apt-get autoclean
sudo apt-get autoremove
sudo apt-get remove --purge somapackagename
dpkg --get-selections | grep linux-image

sudo apt-get install bleachbit
bleachbit --gui # start gui

# see all services
service < option >  --status-all |  --full-restart



#########################
## clean ram
#########################

sync && echo 3 | sudo tee /proc/sys/vm/drop_caches
free -m
free -m | sed -n -e '3p' | grep -Po "\d+$"

# sync; echo 1 > /proc/sys/vm/drop_caches # Clear PageCache only.
# sync; echo 2 > /proc/sys/vm/drop_caches # Clear dentries and inodes.
# sync; echo 3 > /proc/sys/vm/drop_caches # Clear PageCache, dentries and inodes.

http://www.tecmint.com/clear-ram-memory-cache-buffer-and-swap-space-on-linux/


#########################
## ppa apt-get management
#########################

man apt-get

# remove packages that were automatically installed to satisfy dependencies
# for some package and that are no more needed.
sudo apt-get autoremove

# --fix-broken
sudo apt-get install -f

# if dpkg was interrupted
sudo dpkg --configure -a

# Update packages
sudo apt-get update && sudo apt-get upgrade

# Remove App software
sudo apt-get remove wolfram-engine
sudo apt-get remove --purge wolfram*


sudo apt search google-chrome*
sudo apt search ^google-chrome*
aptitude versions google-chrome ^chromium$ --disable-columns
sudo apt install google-chrome-stable/now

sudo apt-get clean
sudo apt-get update && sudo apt-get dist-upgrade
---------------------------------------------------

# Add some Repos
sudo add-apt-repository ppa:someppa/ppa
sudo add-apt-repository ppa:webupd8team/gnome3
sudo apt-get update

# Remove some Repos
sudo add-apt-repository --remove ppa:someppa/ppa
sudo add-apt-repository --remove ppa:webupd8team/gnome3

# Purge Repos
sudo apt-get install ppa-purge
sudo ppa-purge ppa:someppa/ppa
sudo ppa-purge ppa:unity-team/staging

# http://www.webupd8.org/2012/02/how-to-use-launchpad-ppa-add-remove.html







#################################
# add linux user
#################################

sudo adduser <username>
sudo adduser <username> sudo

# adduser <username> --group sudo
# sudo usermod -aG sudo <username>
# sudo usermod -a -G groupName userName

sudo deluser user group

# usermod -a -G group user
# sudo gpasswd -a myuser mygroup
# sudo usermod -a -G group user


last -i # print last loggins in system
last -i | grep "system boot"
#last -i | grep "still logged" | awk '{ print  " "  }'
netstat -an 0.0.0.0


#################################
# add linux user and change hostname
#################################

sudo -i
adduser mpxvm

sudo grep -ir demo-VirtualBox /etc/
/etc/hostname:demo-VirtualBox
/etc/hosts:127.0.1.1	demo-VirtualBox

sudo nano /etc/hosts
sudo nano /etc/hostname
------------------------------------------------------------

# example create new group called "asmdba" and add it to the other group

$ id -a
uid=1001(oracle) gid=100(oinstall) groups=100(oinstall),101(dba)
$ groupadd -g 102 asmdba
$ usermod -G +asmdba oracle
$ id -a
uid=1001(oracle) gid=100(oinstall) groups=100(oinstall),101(dba),(102)asmdba

------------------------------------------------------------

#################################
Practical Grep Command Examples in Linux - Linux Handbook
https://linuxhandbook.com/grep-command-examples/
https://linuxhint.com/30_grep_examples/
#################################

grep -iR '|' ./ --include='*.csv' # search recursiv on deep folders, only is ext file
grep -irw --color=auto --include='*.js' Opal . # search recursiv with colors
grep -irwl --include='*.js' Opal . | wc -l # counting



#################################
# update linux password
#################################

sudo passwd user    # some user
sudo passwd         # current user

sudo -i     # as root
su          # as root
sudo -u     # masquerade

sudo reboot         # reboot
sudo shutdown -r    # reboot
systemctl reboot -i

# backups dumps
mysqldump --all-databases --single-transaction --user=root --pass > all_databases.sql
mysqldump --all-databases --single-transaction --set-gtid-purged=OFF --user=root --pass > all_databases.sql
mysql -uroot -p < partial_database_backup.sql


######################################################
####
#### Clean ibdata1 file - because is to big
#### DO BACKUP FROM ALL DB'S BOFORE THIS STEP!!!!!!!!
#### SHOW DATABASES
#### https://mariadb.atlassian.net/browse/MDEV-8421
#### https://bugs.mysql.com/bug.php?id=1341
####
####
######################################################

sudo /opt/lampp/xampp stop
sudo rm -rf /opt/lampp/var/mysql/ibdata1
sudo find / -name "ibdata1"
#/opt/lampp/var/mysql/ibdata1
#/var/lib/mysql/ibdata1
sudo cp /var/lib/mysql/ibdata1 /opt/lampp/var/mysql/
sudo /opt/lampp/xampp start

# check config
sudo nano /opt/lampp/etc/my.cnf

[client]
port            = 3306
socket          = /opt/lampp/var/mysql/mysql.sock

# The MySQL server
[mysqld]
user            = nobody
port            = 3306
socket          = /opt/lampp/var/mysql/mysql.sock

# Set rights for folders & files
sudo chmod -R 755 /opt/lampp/
sudo chown -R root:root /opt/lampp/mysql/

#sudo chown nobody:nogroup ibdata1
#sudo chmod -R 0777 ibdata1
sudo chmod -R 0777 /opt/lampp/var/mysql/  #fix rwx


sudo chown -R  apache:apache *
sudo find . -type d -exec chmod 775 {} \;
sudo find . -type f -exec chmod 664 {} \;


# Restart lampp
sudo /opt/lampp/xampp restart

# Check Processes
pgrep mysql
pgrep mysql | wc -l
pgrep -l mysql

# when not connect with sock
sudo nano /opt/lampp/etc/my.cnf # max_allowed_packet=100M + socket  = /opt/lampp/var/mysql/mysql.sock
sudo chmod 777 -R /opt/lampp
sudo chmod 755 -R /opt/lampp/
/opt/lampp/sbin/mysqld --user=nobody

Fix: Warning: World-writable config file '/opt/lampp/etc/my.cnf' is ignored
sudo chmod 0644 /opt/lampp/etc/my.cnf

######################################################
#
# 5.6.7 mysqlbinlog — Utility for Processing Binary Log Files
# http://dev.mysql.com/doc/refman/5.7/en/mysqlbinlog.html
#
######################################################

strings /pfad/zum/ib_logfile0
mysqlbinlog binlog.000001 > filename.txt
mysqlbinlog binlog | mysql -u root -p
mysqlbinlog binlog.0000003

mysqlbinlog -u root -p -R --socket=/var/run/mysqld/mysqld.sock  ib_logfile0
mysqlbinlog -u root -p -R --socket=/opt/lampp/var/mysql/mysql.sock /opt/lampp/var/mysql/ib_logfile0  # lampp

######################################################
#
# DROP DATABASE `xxx910`
# Error Code: 1008. Can't drop database 'xxx910'; database doesn't exist
#
######################################################

show variables where Variable_name ='datadir';
+---------------+-----------------------+
| Variable_name | Value                 |
+---------------+-----------------------+
| datadir       | /opt/lampp/var/mysql/ |
+---------------+-----------------------+
1 row in set (0,00 sec)


sudo /opt/lampp/xampp stop
cd /opt/lampp/var/mysql/
rm -rf xxx910
sudo /opt/lampp/xampp start

---------------------------------

#1304 - PROCEDURE _hierarchy already exists

*** Delete Procedure

--------------------------------


###########################
### vpn tunnel
###########################

sudo vpnc custom_conn.conf  # start vpn connection
sudo vpnc-disconnect        # end vpn connection

sudo gedit somefile.ini		# edit file with gedit
sudo nano somefile.ini		# edit file with nano

#############################################
How-To: Connect To A Cisco VPN With Vpnc
#############################################

# etc/vpnc/x.conf	VPNC GUI Labels			Value Example
IPSec gateway		Geteway					19X.XXX.XXX.XX0
IPSec ID			Gruppename/GroupName	AbC&D
IPSec secret 		Gruppenpasswd/GroupPwd	*****

Xauth username 		Benutzername/Username	myuser
Xauth password 		Benutzerpasswd/Password	*****

sudo apt-get install network-manager-vpnc


# Using openconnect
sudo apt install openconnect
sudo apt install network-manager-openconnect
sudo apt install network-manager-openconnect-gnome
sudo openconnect vpn.example.com/vpn


###########################
### chmod options
###########################

https://www.washington.edu/computing/unix/permissions.html

 chmod u=rx file        (Give the owner rx permissions, not w)
 chmod go-rwx file      (Deny rwx permission for group, others)
 chmod g+w file         (Give write permission to the group)
 chmod a+x file1 file2  (Give execute permission to everybody)
 chmod g+rx,o+x file    (OK to combine like this with a comma)


###########################
### crontab crons
###########################

sudo /opt/lampp/xampp stop

crontab -e
crontab -l

crontab: usage error: unrecognized option
usage:	crontab [-u user] file
	crontab [ -u user ] [ -i ] { -e | -l | -r }
		(default operation is replace, per 1003.2)
	-e	(edit user's crontab)
	-l	(list user's crontab)
	-r	(delete user's crontab)
	-i	(prompt before deleting user's crontab)

# every 10 minutes
*/10 * * * * /opt/lampp/bin/php /opt/lampp/htdocs/YourPathToSugar/cron.php > /dev/null 2>&1
*/30 * * * * /opt/lampp/bin/php /opt/lampp/htdocs/YourPathToSugar/Proj/cron.php > /dev/null 2>&1

#*/5 * * * * php -q /opt/lampp/htdocs/YourPathToSugar/Proj/cron.php > /dev/null 2>&1
#*/10 * * * * php -f /opt/lampp/htdocs/YourPathToSugar/Proj/cron.php > /dev/null 2>&1
#*/2 * * * *   cd /home/user/YourPathToSugar/Proj; php -f cron.php > /dev/null 2>&1


/opt/lampp/bin/php -c /etc/php5/cli/php.ini  -f install_cli.php -- -c -t
/opt/lampp/bin/php -c /opt/lampp/etc/php.ini   -f install_cli.php -- -c -t // alternative command without cli
php -c /opt/lampp/etc/php.ini -f cron.php > /dev/null 2>&1

sudo service cron stop
sudo service cron start
sudo service cron restart
sudo /etc/init.d/cron restart

sudo service ssh start
sudo service ssh stop

----------------------------------------------------------------------------

sudo service --status-all
sudo service virtualbox stop | sudo service mysql stop | sudo service teamviewerd stop | sudo service elasticsearch stop

*/5 * * * * php -f cron.php > /dev/null 2>&1
*/5 * * * * php -c /opt/lampp/etc/php.ini  -f cron.php > /dev/null 2>&1
*/5 * * * * php -c /etc/php5/cli/php.ini -f cron.php > /dev/null 2>&1
* * * * *  cd /home/user/PhpstormProjects/PRJ; php -f cron.php > /dev/null 2>&1

----------------------------------------------------------------------------

sudo chown -R "www-data:www-data" /home/user/Projects/
sudo chmod -R g+rw /opt/lampp/htdocs

#apache configs
export APACHE_RUN_USER=www-data
export APACHE_RUN_GROUP=www-data

ls -l /home/

sudo service elasticsearch stop
sudo service elasticsearch start

sh /opt/PhpStorm-141.2462/bin/phpstorm.sh

sudo truncate -s0 access_log
sudo truncate -s0 error_log
tail -n 5 -q php_error_log

######################################
#
# Replace & Rename
#
######################################

Replace string in files ( Jay Daniels writershorde.wordpress.com):
grep -rl '<' ./ | xargs sed -i 's/</<\/html>/g'

Rename multiple files in current directory and all subdirectories( Jay Daniels writershorde.wordpress.com):
find . -iname "*.html" -exec rename 's/\.html$/.htm/' *.html {} \;

######################################
#
# Search Egrep
#
######################################

show content colorised
egrep -rnwl --color=always  'word'   .  | less -R

show only file
egrep -rl --color=always  'word'   .


######################################
#
# Remove comments in PhpStorm
#
######################################

/\*(\*)?(((?!\*/)[\s\S])+)?\*/	- remove /**/
//+(.+)?			- remove //


######################################
#
# Take Screen Shot Ubuntu
#
######################################

gnome-screenshot -w  		# selected screen
gnome-screenshot		# complete screen
gnome-screenshot -w -d 2 	# selected screen with dalay 2 secs
gnome-screenshot -a		# Capture a Particular Area
gnome-screenshot -w -b		# Take Screenshot Including or Excluding Window Border
gnome-screenshot -w -B


############################################################
#
# Repair phpMyAdmin
# 144 - Table './phpmyadmin/pma__column_info' is marked as crashed and last (automatic?) repair failed
#
############################################################

-- usr/usr_/share/doc/phpmyadmin/examples/create_tables.sql.gz
-- cd /usr/share/doc/phpmyadmin/examples
-- sudo gunzip create_tables.sql.gz
-- # import in phpmyadmin -- create_tables.sql.gz
-- mysql -u root -p < create_tables.sql
-- mysql -u root -p -e 'GRANT SELECT, INSERT, DELETE, UPDATE ON phpmyadmin.* TO 'pma'@'localhost' IDENTIFIED BY "pmapassword"'

# OR

sudo dpkg-reconfigure phpmyadmin
#sudo dpkg-reconfigure -plow phpmyadmin

# OR

sudo apt-get remove --purge phpmyadmin
sudo apt-get install phpmyadmin

####################################################
#
# Check all processes in Ubuntu
#
####################################################

sudo service --status-all
sudo service --status-all | grep postgres
sudo service postgresql status

ps -ef
ps -ef | grep postgres
ps aux
ps aux | grep postgres

nmap 192.168.1.3/24

# set your default text editor by using the following command.
sudo update-alternatives --config editor

####################################################
#
# sum check md5 sha256
#
####################################################

sudo apt-get install rhash
rhash --md5 ubuntu-13.04-desktop-amd64.iso
rhash --sha256 ubuntu-13.04-desktop-amd64.iso
rhash --sha1 ubuntu-13.04-desktop-amd64.iso

md5sum ubuntu-9.10-dvd-i386.iso

sha256sum ubuntu-9.10-dvd-i386.iso
sha256sum -c SHA256SUMS 2>&1 | grep OK
sha256sum --check sha256sum.txt

shasum -a 256 CentOS-6.5-x86_64-minimal.iso


########################################################################################
# Outlook .msg file? convert to
# http://www.matijs.net/software/msgconv/
########################################################################################
wget http://www.matijs.net/software/msgconv/msgconvert.pl
sudo apt-get install libemail-outlook-message-perl libemail-localdelivery-perl libemail-sender-perl
perl msgconvert.pl YourMessage.msg

I saved attachment after I opened with File->Open Saved Messages... menu in Thunderbird.

http://askubuntu.com/questions/24884/how-do-i-view-an-outlook-msg-file
http://www.matijs.net/software/msgconv/
#######################################################################################





####################################################
#
# reset ubuntu desktop
#
####################################################

sudo dpkg-reconfigure -phigh -a

sudo apt-get install --reinstall ubuntu-desktop

dconf reset -f /org/compiz/
setsid unity

sudo apt-get install ubuntu-desktop
sudo do-release-upgrade -d
sudo do-release-upgrade
sudo apt-get update && apt-get dist-upgrade
sudo apt get update && sudo apt-get install ubuntu-desktop

rm -rf .gnome .gnome2 .gconf .gconfd .metacity

sudo apt-get install unity-tweak-tool
unity-tweak-tool --reset-unity
unity --reset-icons



####################################################
#
# reset ubuntu package
#
####################################################

apt-get purge package
apt-get install package

sudo apt-get --purge remove package

# chrome://settings/resetProfileSettings

chrome://memory-redirect/
chrome://memory-redirect/
chrome://settings/
chrome://about/

-----------------------------------


synaptic &

dpkg --list
dpkg --list | less
dpkg --list | grep -i 'http'

####################################################
#
#   nano howto
#   https://wiki.gentoo.org/wiki/Nano/Basics_Guide
#   http://askubuntu.com/questions/47515/any-way-to-search-for-text-within-nano
#
####################################################

nano filename		# opening and creating files
nano -w /etc/fstab	# very important that you use the -w switch when opening a config file

Ctrl + O 	# save the changes you've made
Ctrl + X 	# ask nano to exit from a modified file
Ctrl + W 	# Searching for a string

####################################################
#
#   Nano Editor keys
#   https://monovm.com/post/35/how-to-search-in-nano
#
####################################################

NOTE: Any command prefixed with a caret symbol (^) means to use the Ctrl key (e.g., ^G means to press the Ctrl+G keys at the same time).

Ctrl+G     nano help
Ctrl+A     move to beginning of line in nano
Ctrl+E     move to end of line in nano
Ctrl+Y     move down a page - next page in nano
Ctrl+V     move up a page - previous page in nano
Ctrl+_     move to a specific line (Ctrl+_Ctrl+V moves to the top of the file, Ctrl+_Ctrl+Y to the bottom)
Ctrl+C     find out what line the cursor is currently on
Ctrl+W    search or find some text in nano
Ctrl+D     delete character currently under the cursor
Ctrl+K     delete line in nano, nano remove line
Also for remove or clear or delete some content or multiple lines you can select lines with your mouse and then use CTRL+K.

Ctrl+O     save file in nano (you will be prompted for a file to save to)
Ctrl+X     exit nano (you will be prompted to save your file if you have not)


#############################################
# create ssh key
#############################################

ssh-keygen -t rsa # For a 2048 bit RSA key
ssh-keygen -t rsa -b 4096

openssl genrsa -out mykey.pem 4096
openssl rsa -in mykey.pem -pubout > mykey.pub

openssl genrsa -des3 -out private.pem 2048  # Generate a 2048 bit RSA Key
openssl rsa -in private.pem -outform PEM -pubout -out public.pem # Export the RSA Public Key to a File

https://rietta.com/blog/2012/01/27/openssl-generating-rsa-key-from-command/
https://support.rackspace.com/how-to/generate-a-csr-with-openssl/
https://wiki.osuosl.org/howtos/ssh_key_tutorial.html

###################################################################

search my command-line history for commands I used before
CTRL-R

Killer-feature in PHPStorm: Search everywhere: Simply double-tap the SHIFT key
# https://www.jetbrains.com/help/webstorm/2016.3/searching-everywhere.html
1 Click search_everywhere in the upper-right corner of the WebStorm window.
2 Double-press Shift


###########################
### edit grub to show boot startup options
###########################

sudo nano /etc/default/grub
#GRUB_HIDDEN_TIMEOUT=0
sudo update-grub


###########################
### screen
###########################

sudo apt install screen
screen -S sitzung1  	# Starten einer neuen Sitzung mit dem Namen "sitzung1"
screen -r 		# Nimmt die Sitzung wieder auf, falls nur eine einzige Sitzung im Hintergrund läuft
screen -r sitzung1 	# Nimmt die Sitzung mit dem Namen "sitzung1" wieder auf
screen -ls 		# Auflisten der Namen aller laufenden Screen-Sitzungen
screen -d sitzung1	# Trennt die Verbindung zu einer laufenden Sitzung mit dem Namen "sitzung1"
screen -rx sitzung1 	# Die Sitzung mit dem Namen "sitzung1" kann an mehreren Computern gleichzeitig angezeigt werden
screen -S sitzung1 -X stuff $'ls -l\n' # An die Sitzung mit dem Namen "sitzung1" einen Befehl senden und ausführen

screen ping www.google.de
screen -d -m ping www.google.de
screen -ls

Strg+A , gefolgt von  C zum Erstellen eines neuen Fensters
Strg+A , gefolgt von  SPACE zu wistch
Strg+A , gefolgt von  D zum detach
Strg+A , gefolgt von  ? zum Overview
Strg+D - exit

https://wiki.ubuntuusers.de/Screen/
https://www.computerhope.com/unix/screen.htm
https://www.rackaid.com/blog/linux-screen-tutorial-and-how-to/

Screen key bindings, page 1 of 4.

Command key:  ^A   Literal ^A:  a

break      ^B b          only       Q
clear      C             other      ^A
colon      :             pow_break  B
copy       ^[ [          pow_detach D
detach     ^D d          prev       ^P p ^?
digraph    ^V            readbuf    &amp;amp;amp;lt;
displays   *             redisplay  ^L l
fit        F             removebuf  =
flow       ^F f          reset      Z
focus      ^I            screen     ^C c
hardcopy   h             select     '
help       ?             silence

https://howto-blog.net/debian-linux-screen-befehle/
https://wiki.ubuntuusers.de/Screen/
http://www.tecmint.com/screen-command-examples-to-manage-linux-terminals/

https://wiki.ubuntuusers.de/Screen/
https://www.computerhope.com/unix/screen.htm
https://www.gnu.org/software/screen/manual/screen.html

sudo apt install screen

-S sessionname # creating a new session
-ls and -list # prints a list
-p number_or_name # Preselect a window.
kill # screen exits
exit # screen exits
next # Switch to the next window
prev # Switch to the prev window
quit # Kill all windows and terminate screen.

C-a space
C-a n
C-a C-n	(next)	Switch to the next window.


#################################
#
#  base64 encode decode
#
#################################

cat text.txt | base64
base64 -d text64.txt



#########################################################
#
#	generate random password from command-line
#
#########################################################

openssl rand -base64 6
openssl rand -hex 4
openssl rand -base64 8 |md5 |head -c8;echo

date |md5 | head -c8; echo
ping -c 1 yahoo.com |md5 | head -c8; echo

...

date +%s | sha256sum | base64 | head -c 32 ; echo
date +%s | sha256sum | base64 | head -c 32 ; echo


base32    base64
sha1sum    sha256sum     sha512sum      sha224sum     sha384sum


date +%s | sha256sum | base32 | head -c 12; echo
GA4GGNTCMZST
date +%s | sha1sum | base64 | head -c 12; echo
NzllNGJlZGM0


< /dev/urandom tr -dc _A-Z-a-z-0-9 | head -c${1:-32};echo;

apg -a 1

sudo apt-get install pwgen
pwgen -syBv

makepasswd -count 20 -minchars 8
sudo apt-get install passwordmaker-cli

https://www.howtogeek.com/howto/30184/10-ways-to-generate-a-random-password-from-the-command-line/
http://osxdaily.com/2011/05/10/generate-random-passwords-command-line/
https://medium.com/@jdorfman/osx-password-generator-in-bash-48687892c4f3
https://wiki.ubuntuusers.de/pwgen/
http://www.makeuseof.com/tag/5-ways-generate-secure-passwords-linux/
https://someguyanth.wordpress.com/tutorials/mac-os-x/create-a-good-password-using-terminal/
https://askubuntu.com/questions/25090/can-you-recommend-a-password-generator
https://www.gaijin.at/olspwgen.php


#################################
#
#  show ubuntu version
#
#################################

lsb_release -a
cat /etc/*release
uname -a

#################################
#
#   stress ubuntu
#   http://www.hecticgeek.com/2012/11/stress-test-your-ubuntu-computer-with-stress/
#
#################################


sudo apt-get install stress
stress -c 1 # stress one CPU
stress -c 4 # stress 4 CPU
stress -m 3 # stress RAM module using three processes, with each about 256MiB in size
stress -m 4 --vm-bytes 300M
stress -d 1 # Stressing the Disk Drive
stress -d 2 --hdd-bytes 512M # stres HDD with 2 processes, with each sizing around 512MB
stress -c 4 -m 2 -d 1 # Stressing CPU, RAM and HDD simultaneously
stress -c 4 -m 2 -d 1 -t 40s # Setting up a timeout

########################################
#
# 	bluetooth start stop
#	http://askubuntu.com/questions/280210/why-cant-we-remove-bluetooth-service-the-reguler-way
#
##########################################

Example:

sudo service bluetooth stop
sudo mv /etc/init/bluetooth.conf /etc/init/bluetooth.conf.disabled
You can re-enable by changing the name back to bluetooth.conf without a restart.

sudo mv /etc/init/bluetooth.conf.disabled /etc/init/bluetooth.conf
sudo service bluetooth start


update-rc.d -f bluetooth remove
sudo update-rc.d -f bluetooth remove
sudo ls -la /etc/init.d/ | grep bluetooth

####################################
#
#	Sublime-Text tricks
#
####################################
https://www.sublimetext.com/docs/2/multiple_selection_with_the_keyboard.html
http://www.sublimetext.com/docs/commands
https://www.sublimetext.com/docs/3/
https://forum.sublimetext.com/t/split-into-lines/10196/5

Text manipulation
Keypress	        Command
Ctrl + KU	        Transform to Uppercase
Ctrl + KL	        Transform to Lowercase
Ctrl + J	        Join line below to the end of the current line
Ctrl + Schift + D	Duplicate line(s)
Ctrl + J            A single command shortcut for merging multiple lines into 1 is "join lines".
Ctrl+Shift+L        Splitting the Selection into Lines

Alt+F3              Splitting single Selection into multiple Lines, Select space between items than press Alt+F3 and Enter
Select Char + Press Alt+F3 (windows/Linux) to select all, hit enter.
If the whitespace varies, use a regex search, then select all as above and hit return.
http://docs.sublimetext.info/en/latest/reference/keyboard_shortcuts_win.html

Regex Sublime
data-reference-id="12345678"
data-reference-id.*(\d)"\s  	# Sublime-text match
data-reference-id.*(\d)"		# regextester.com match Javascript / regexr.com Javascript

#########################################################
#
#   How to turn off Sublime 3 updates notification?
#
#########################################################

{
	"color_scheme": "Packages/Color Scheme - Default/LAZY.tmTheme",
	"font_size": 8,
	"update_check": false
}

How to turn off Sublime 3 updates notification?
https://forum.sublimetext.com/t/solved-disable-update-available-pop-up/1381/7
Preferences.sublime-settings
Preferences -> Settings-User and add there: "update_check": false,

{
	"font_size": 8,
	 "update_check": false, # add
}

####################################
#
#	Install Arial on Ubuntu
#
####################################

sudo apt-get install ttf-mscorefonts-installer
sudo fc-cache
sudo reboot
#fc-match Arial
# sudo apt-get install ttf-mscorefonts-installer
# sudo apt-get install --reinstall ttf-mscorefonts-installer

####################################
#
# Diagnostic Linux Commands
#
####################################

uptime
dmesg | tail
free -m
uname -a
df -h

####################################
#
# Run parlell apache instances
#
####################################


apache2 -d serverroot1 -f config1 &
apache2 -d serverroot2 -f config2 &

or install 2 docker containers with difference ports

####################################
#
# Add Bash/shell in startup to stop services
#
####################################

cd /etc/init.d/                         # go to folder
sudo touch stop_my_app                  # create file
sudo chmod +x /etc/init.d/stop_my_app   # set rights

#sudo ln -s /etc/init.d/stop_my_app /etc/rc.d/  # DEPRECATED - folder does not exists

# edit and save in: sudo nano /etc/init.d/stop_my_app

#!/bin/sh
sudo service cron stop
sudo service speech-dispatcher stop

# add in /etc/rc.local
sudo service stop_my_app start

# restart and check status
service --status-all


#########################################
#
#	sensors CPU temperature
#
#########################################

sudo apt-get install lm-sensors
After installation type the following in terminal

sudo sensors-detect
You may also need to run

sudo service kmod start
It will ask you few questions. Answer Yes for all of them. Finally to get your CPU temperature type sensors in your terminal.

sensors

https://askubuntu.com/questions/15832/how-do-i-get-the-cpu-temperature

sensors
coretemp-isa-0000
Adapter: ISA adapter
Core 0:       +83.0°C  (high = +100.0°C, crit = +100.0°C)
Core 1:       +83.0°C  (high = +100.0°C, crit = +100.0°C)

wget -qO - https://download.sublimetext.com/sublimehq-pub.gpg | sudo apt-key add -
echo "deb https://download.sublimetext.com/ apt/stable/" | sudo tee /etc/apt/sources.list.d/sublime-text.list
sudo apt-get update
sudo apt-get install sublime-text

#################################################
#
#  kill processes chrome firefox
#
#################################################

pkill chromium
while pgrep chrome ; do pkill chrome ; done

pkill --oldest chrome

pgrep chrome | xargs kill
for i in `pgrep chrome` ; do kill $i ;  sleep .33 ; done
while pgrep chrome ; do pkill chrome ; done
watch pkill chrome
for i in `pgrep chrome` ; do kill $i && wait $i ;  sleep .33 ; done
kill $(ps -C google-chrome -o pid=)


pkill firefox
for i in $(ps x | grep firefox | cut -d"?" -f1 | grep -v firefox); do kill -9 $i ; done
killall chrome
for i in $(ps x | grep chrome | cut -d"?" -f1 | grep -v chrome); do kill -9 $i ; done


ps aux | grep chrome | awk ' { print $2 } ' | xargs kill -9
pgrep chrome | xargs kill -9
ps aux | awk '/chrome/ { print $2 } ' | xargs kill -9



#######################################
#
# remove reinstall
#
#######################################


sudo dpkg --purge --force-remove-reinstreq package
sudo apt-get -f install
sudo apt-get -s autoremove --purge package


#######################################
#
# Add user and group
#
#######################################

compgen -u # list users
compgen -g # list groups
cat /etc/group # list groups

# Add user
sudo useradd username -m -s /bin/bash
sudo passwd username

# Add user to group
sudo adduser <username> root
#sudo usermod -aG <groupname> <username>

https://help.ubuntu.com/community/AddUsersHowto

sudo usermod -a -G others john
sudo usermod -g others john

#######################################
#
#	install vim with molokai
#
#######################################

sudo apt-get install vim
sudo apt-get install vim vim-runtime

To test a color scheme, in Vim editor, switch to command mode, and type :colorscheme new_scheme.
The “new_scheme” is the *.vim files in ~/.vim/colors/.


http://www.mkyong.com/linux/how-to-install-a-vim-color-scheme/
http://www.vimninjas.com/2012/08/26/10-vim-color-schemes-you-need-to-own/

set background=dark
set background=light
colorscheme hemisu

https://github.com/tomasr/molokai
https://draculatheme.com/vim/
http://vimcolors.com/

cd ~/.vim
git submodule add git@github.com:dracula/vim.git bundle/dracula-theme
git clone https://github.com/vim-airline/vim-airline-themes ~/.vim/bundle/vim-airline-themes


wget https://raw.githubusercontent.com/tomasr/molokai/master/colors/molokai.vim

https://github.com/ryanb/dotfiles/blob/master/vim/colors/railscasts.vim
https://github.com/tpope/vim-vividchalk
http://www.vim.org/scripts/script.php?script_id=282
http://alvinalexander.com/linux/vi-vim-editor-color-scheme-colorscheme

# Set Theme *******
vi ~/.vimrc
colorscheme molokai
colors molokai
syntax on

....


syntax on
let g:solarized_termtrans=1
let g:solarized_termcolors=256
set background=dark
colorscheme solarized
augroup reload_vimrc
autocmd!
autocmd BufWritePost $MYVIMRC source $MYVIMRC
augroup END


#######################################
#
#	install vim with molokai
#
#######################################

See :help :colorscheme.
You can type :colo and then ctrl-d to list all available colorschemes.

How to tell which colorscheme a Vim session currently uses

echo g:colors_name
:call ShowColourSchemeName()
:help colorscheme

----------------------------------------------

Specifying a colorscheme in your vimrc file
vi ~/.vimrc
color desert
syntax on

https://github.com/sickill/vim-monokai # ****
https://github.com/sickill/vim-monokai/blob/master/colors/monokai.vim
https://raw.githubusercontent.com/sickill/vim-monokai/master/colors/monokai.vim

https://github.com/crusoexia/vim-monokai
https://github.com/crusoexia/vim-monokai/blob/master/colors/monokai.vim

https://github.com/stephenway/monokai.terminal

https://github.com/Brackets-Themes/Monokai
https://github.com/kevinsawicki/monokai
https://github.com/oubiwann/vim-blackboard-sublime-theme/
https://github.com/tomasr/molokai
https://github.com/sickill/vim-monokai
http://www.phpstorm-themes.com/theme/monokai-sublime
https://github.com/OtaK/jetbrains-monokai-sublime

######################################
#
# merge multiple folders in sigle folder
#
######################################

find . -type f | wc -l # count files in curret folder OK
for i in `find folder1 -name "*.jpg"`; do cp $i folder2/$RANDOM-$(basename $i); done # copy all files into single folder OK
#for i in `find ../folder -name "*.jpg"`; do mv $i ../folder/PREFIX-"$RANDOM".jpg; done # rename randpm
#rename -n 's/(.*)\.jpg$/Misc_$1\.jpg/' *.jpg # -n for simulate
for i in *.jpg; do new=$(printf "%04d.jpg" "$a") && mv -i -- "$i" "Prefx_$new" && let a=a+1; done # rename





#######################################################################
#
#   How To Find Passwords of All Connected Wi-Fi Networks using CMD
#
#######################################################################

netsh wlan show profile
netsh wlan show profile virus key=clear


#######################################################################
#
#   11 log files you should see on your Linux system
#
#######################################################################

/var/log/messages : General message and system related stuff
/var/log/boot.log : Services success/failures at boot
/var/log/secure or /var/log/auth.log : Authentication log
/var/log/utmp or /var/log/wtmp : Login records
/var/log/btmp  : Failed login records
/var/log/cron : Scheduler log file
/var/log/maillog : Mail logs
/var/log/xferlog : File transfer logs
/var/log/lastlog : Last login details
dmesg : Device driver messages
/var/crash logs : System crash dump

https://kerneltalks.com/errors/11-log-files-you-should-see-on-your-linux-system/

##########################################################
#
#   how-to-encrypt-and-decrypt-files
#
##########################################################

https://www.cyberciti.biz/tips/linux-how-to-encrypt-and-decrypt-files-with-a-password.html
https://www.tecmint.com/linux-password-protect-files-with-encryption/
https://linoxide.com/linux-how-to/cipher-command-line-tool-encrypt-decrypt-files-directories/


sudo apt-get install gnupg
gpg -c ~/Desktop/Tecmint/tecmint.txt # gpg -c filename # encrypt
ls -l ~/Desktop/Tecmint #  create a .gpg file:
gpg --version
rm ~/Desktop/Tecmint/tecmint.txt
gpg ~/Desktop/Tecmint/tecmint.txt.gpg


sudo apt-get install bcrypt
bcrypt ~/Desktop/Tecmint/tecmint.txt
bcrypt tecmint.txt.bfe


sudo apt-get install ccrypt
ccencrypt ~/Desktop/Tecmint/tecmint.txt
ccdecrypt ~/Desktop/Tecmint/tecmint.txt.cpt


sudo apt-get install zip
zip --password mypassword tecmint.zip tecmint.txt tecmint1.1txt tecmint2.txt
unzip tecmint.zip

# unzip installation
sudo apt-get install unzip
unzip file.zip -d destination_folder


sudo apt-get install openssl
openssl enc -aes-256-cbc -in ~/Desktop/Tecmint/tecmint.txt -out ~/Desktop/Tecmint/tecmint.dat
openssl enc -aes-256-cbc -d -in ~/Desktop/Tecmint/tecmint.dat > ~/Desktop/Tecmint/tecmint1.txt


sudo apt-get install p7zip-full
7za a -tzip -p -mem=AES256 tecmint.zip tecmint.txt tecmint1.txt
7za e tecmint.zip


############################################################################
SELinux - Security-enhanced Linux for mere mortals - 2015 Red Hat Summit
Thomas Cameron — Chief Architect, Central US, Red Hat, Inc.
#############################################################################

semanage port -l | grep http

ls -Z
id -Z
ps -Z
netstat -Z

chcon -t httpd_sys_content_t /var/www/html/index.html
chcon --reference  /var/www/html/ /var/www/html/index.html

restorecon -vR /var/www/html

semanage fcontent -a -t httpd_sys_content_t "/foo(/.*)?"
semanage fcontent -a -e /var/www /foo/

grep httpd /var/log/audit/audit.log | audit2allow -m squirred
semodule -i squirredlocal.pp
setenforce 1


//---------------------------------------------------
Are you listening to what SELinux is telling you?
Red Hat Summit Dan Walsh
//---------------------------------------------------

netstat -tulpen | grep 11233
dmesg
mv -iZ # preserve right rights

setsebool -P httpd_can_sendmail 1
setsebool -P ftp_home_dir 1

semanage boolean --list
man httpd_selinux
setroubleshoot

grep ftp /var/log/audit/audit.log | audit2allow
allow ftpd_t home_root_t:dir search;
semanage port -a -t ssh_port_t -p tcp 55 # set port
semanage port --list

grep postgresql /var/log/audit/audit.log | audit2allow -M mypostgresql
semodule -i mypostgresql.pp

//---------------------------------------------------
Demystifying systemd - 2015 Red Hat Summit
//---------------------------------------------------

service httpd {start|stop|restart|reload}
systemclt {start|stop|restart|reload} httpd.service
systemclt -t service # list loaded
systemclt list-unit-files -t service # list installed services
systemclt --state failed # show failed services

chkconfig httpd {on,off} # init
systemctl {enable,disable} httpd

systemctl get-default   # view
systemctl set-default [target] # set
systemctl isolate [target] # change

systemctl show --all httpd
systemctl show -p Restart httpd
systemctl daemon-reload

systemd-delta # see changes
systemd-cgtop # see resources

systemctl set-property --runtime httpd CPUShares=2048
systemctl set-property httpd CPUShares=2048

journalctl  # /var/log/journal # rsyslog

#systemd-nspawn -D /var/lib/container/rhel7
systemd-socket-proxy
networkd


//---------------------------------------------------
SELinux For Dummies by  Gary Smith
//---------------------------------------------------

setenforce enforcing
ps -efZ
ls -Z
/etc/selinux/config
touch /.autorelabel
ausearch -i -m AVC,USER_AVC -sv no

/var/log/audit/audit.log

chcon --type=traceroute_exec_t /usr/bin/nmap
ls -Z /usr/bin/nmap
semanage fcontext -a -t traceroute_exec_t /usr/bin/nmap
restorecon /path/to/filename























##################################################################
#
#   yiiframework 2.x install - Linux Lite / Linux Mint - PHP 7.4 - mariadb
#
##################################################################


https://www.yiiframework.com/doc/guide/2.0/en
https://www.yiiframework.com/doc/guide/2.0/en/start-installation

composer create-project --prefer-dist yiisoft/yii2-app-basic app-yii2

php yii serve
php yii serve --port=8888
# http://localhost:8080/


cp requirements.php web/
http://localhost:8080/requirements.php



# Application Structure
https://www.yiiframework.com/doc/guide/2.0/en/start-workflow

basic/                  application base path
    composer.json       used by Composer, describes package information
    config/             contains application and other configurations
        console.php     the console application configuration
        web.php         the Web application configuration
    commands/           contains console command classes
    controllers/        contains controller classes
    models/             contains model classes
    runtime/            contains files generated by Yii during runtime, such as logs and cache files
    vendor/             contains the installed Composer packages, including the Yii framework itself
    views/              contains view files
    web/                application Web root, contains Web accessible files
        assets/         contains published asset files (javascript and css) by Yii
        index.php       the entry (or bootstrap) script for the application
    yii                 the Yii console command execution script


public function actionSay($message = 'Hello')
{
    return $this->render('say', ['message' => $message]);
}
http://localhost:8080/index.php?r=site%2Fsay&message=Hello+World

https://www.yiiframework.com/doc/guide/2.0/en/start-forms
http://localhost:8080/index.php?r=site%2Fentry

Configuring a DB Connection
config/db.php
https://github.com/sam-it/yii2-mariadb

return [
    'class' => 'yii\db\Connection',
    'dsn' => 'mysql:host=localhost;dbname=yii2basic',
    'username' => 'root',
    'password' => '',
    'charset' => 'utf8',
];

mysql -u blabla -p
create database yii2basic;

CREATE TABLE `country` (
  `code` CHAR(2) NOT NULL PRIMARY KEY,
  `name` CHAR(52) NOT NULL,
  `population` INT(11) NOT NULL DEFAULT '0'
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO `country` VALUES ('AU','Australia',24016400);
INSERT INTO `country` VALUES ('BR','Brazil',205722000);
INSERT INTO `country` VALUES ('CA','Canada',35985751);
INSERT INTO `country` VALUES ('CN','China',1375210000);
INSERT INTO `country` VALUES ('DE','Germany',81459000);
INSERT INTO `country` VALUES ('FR','France',64513242);
INSERT INTO `country` VALUES ('GB','United Kingdom',65097000);
INSERT INTO `country` VALUES ('IN','India',1285400000);
INSERT INTO `country` VALUES ('RU','Russia',146519759);
INSERT INTO `country` VALUES ('US','United States',322976000);

exit;

http://localhost:8080/index.php?r=country%2Findex
http://localhost:8080/index.php?r=country%2Findex&page=2

https://www.yiiframework.com/doc/api/2.0/yii-data-pagination
https://www.yiiframework.com/doc/api/2.0/yii-widgets-linkpager


Generating Code with Gii

config/web.php
$config['bootstrap'][] = 'gii';

web/index.php
defined('YII_ENV') or define('YII_ENV', 'dev');

http://localhost:8080/index.php?r=gii
http://localhost:8080/index.php?r=country%2Findex


CRUD Generator

Model Class:        app\models\Country
Search Model Class: app\models\CountrySearch
Controller Class:   app\controllers\CountryControlle
View Path:          @app/views/country

Generating code using template "~/Web/app-yii2/vendor/yiisoft/yii2-gii/src/generators/crud/default"...
generated controllers/CountryController.php
generated models/CountrySearch.php
generated views/country/_form.php
generated views/country/_search.php
generated views/country/create.php
generated views/country/index.php
generated views/country/update.php
generated views/country/view.php
done!


    Controller: controllers/CountryController.php
    Models: models/Country.php and models/CountrySearch.php
    Views: views/country/*.php



http://localhost:8080/index.php?r=country%2Findex




Add this to CountrySearch model class:
https://stackoverflow.com/questions/45876588/the-table-does-not-exist-active-record

/**
* @inheritdoc
*/
public static function tableName()
{
    return 'country';
}


https://www.yiiframework.com/extensions
https://www.yiiframework.com/books
https://www.yiiframework.com/doc/api/2.0/index

curl https://www.yiiframework.com/doc/api/2.0 -H 'Accept: application/json'



https://www.yiiframework.com/doc/guide/2.0/en/structure-controllers

mysql -u blabla -p
create database yii2basic;
use yii2basic;

CREATE TABLE `post` (
  `id` INT(11) NOT NULL PRIMARY KEY,
  `title` CHAR(255) NOT NULL,
  `description` CHAR(255) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO `post` VALUES ('1','title 1','description 1');
INSERT INTO `post` VALUES ('2','title 2','description 2');

# Export DB
mysqldump -u blabla -p yii2basic > yii2basic.sql

# Import DB
mysql -u blabla -p yii2basic < yii2basic.sql